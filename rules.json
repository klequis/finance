{
  "rules": [
    {
      "id": 99,
      "expectRows": 0,
      "compassQuery": "",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "ATM CHECK DEPOSIT"
        }
      ],
      "action": {
        "action": "truncate",
        "field": "description",
        "findValue": "ATM CHECK DEPOSIT"
      }
    },
    {
      "id": 1,
      "expectRows": 11,
      "compassQuery": "{ description: { $regex: '^MORGAN STANLEY', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "Morgan Stanley"
        },
        { "field": "typeOrig", "operation": "equals", "value": "ACH_CREDIT" }
      ],
      "action": {
        "action": "delete"
      }
    },
    {
      "id": 5,
      "expectRows": 3,
      "compassQuery": "{ description: { $regex: '^CHECK #', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "CHECK #"
        }
      ],
      "action": {
        "action": "strip",
        "field": "description",
        "findValue": "CHECK #",
        "numAdditionalChars": 6
      }
    },





    {
      "id": 2,
      "expectRows": 1,
      "compassQuery": "{ description: { $regex: '^ATM CHECK DEPOSIT', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "ATM CHECK DEPOSIT"
        }
      ],
      "action": {
        "action": "replaceAll",
        "field": "description",
        "replaceWithValue": "ATM CHECK DEPOSIT"
      }
    },
    {
      "id": 3,
      "expectRows": 5,
      "compassQuery": "{ description: { $regex: '^ATM WITHDRAWAL', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "ATM WITHDRAWAL"
        }
      ],
      "action": {
        "action": "replace",
        "field": "description",
        "actionValue": "ATM WITHDRAWAL"
      }
    },
    {
      "id": 4,
      "expectRows": 24,
      "compassQuery": "{ description: { $regex: '^CHASE CREDIT CRD AUTOPAY', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "CHASE CREDIT CRD AUTOPAY"
        }
      ],
      "action": {
        "action": "delete"
      }
    },
    
    {
      "id": 6,
      "expectRows": 2,
      "compassQuery": "{ description: { $regex: 'chevron', $options: 'im' } }",
      "criteria": [
        { "field": "description", "operation": "contains", "value": "chevron" }
      ],
      "action": {
        "action": "categorize",
        "category1": "auto",
        "category2": "gasoline"
      }
    },
    {
      "id": 7,
      "expectRows": 13,
      "compassQuery": "{ description: { $regex: '^CITI CARD ONLINE PAYMENT', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "CITI CARD ONLINE PAYMENT"
        }
      ],
      "action": {
        "action": "delete"
      }
    },
    {
      "id": 8,
      "expectRows": 3,
      "compassQuery": "{ description: { $regex: '^Essex Property T RENTAL', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "Essex Property T RENTAL"
        }
      ],
      "action": {
        "action": "categorize",
        "category1": "utilities",
        "category2": "aum"
      }
      
    },
    {
      "id": 9,
      "expectRows": 1,
      "compassQuery": "{ description: { $regex: '^FRANCHISE TAX', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "FRANCHISE TAX"
        },
        { "field": "typeOrig", "operation": "equals", "value": "ach_credit" }
      ],
      "action": {
        "action": "categorize",
        "category1": "tax",
        "category2": "refund"
      }
    },
    {
      "id": 10,
      "expectRows": 12,
      "compassQuery": "{ description: { $regex: '^HUMANA,  INC', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "HUMANA,  INC"
        }
      ],
      "action": {
        "action": "categorize",
        "category1": "medical",
        "category2": "insurance"
      }
    },
    {
      "id": 11,
      "expectRows": 13,
      "compassQuery": "{ description: { $regex: '^INTEREST PAYMENT', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "INTEREST PAYMENT"
        }
      ],
      "action": {
        "action": "categorize",
        "category1": "income",
        "category2": "interest"
      }
      
    },
    {
      "id": 12,
      "expectRows": 1,
      "compassQuery": "{ description: { $regex: '^IRS  TREAS', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "IRS  TREAS"
        }
      ],
      "action": {
        "action": "categorize",
        "category1": "tax",
        "category2": "refund"  
      }
      
    },

    {
      "id": 13,
      "expectRows": 4,
      "compassQuery": "{ description: { $regex: '^MORGAN STANLEY & DIR DEP', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "MORGAN STANLEY & DIR DEP"
        }
      ],
      "action": {
        "action": "categorize",
        "category1": "income",
        "category2": "morgan-stanley"  
      }
      
    },
    {
      "id": 14,
      "expectRows": 1,
      "compassQuery": "{ $and: [ { description: { $regex: '^NY STATE' } },  { description: { $regex: 'NYSTTAXRFD' } }] }",
      "criteria": [
        {
          "field": "description",
          "operation": "beginsWith",
          "value": "NY STATE"
        },
        {
          "field": "description",
          "operation": "contains",
          "value": "NYSTTAXRFD"
        }
      ],
      "action": {
        "action": "categorize",
        "category1": "tax",
        "category2": "refund"  
      }
      
    },
    {
      "id": 15,
      "expectRows": 65,
      "compassQuery": "{ description: { $regex: '^Online Payment', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "contains",
          "value": "Online Payment"
        }
      ],
      "action": {
        "action": "strip",
        "field": "description",
      }
      
    },
    {
      "id": 16,
      "expectRows": 14,
      "compassQuery": "{ $and: [ { description: { $regex: 'Bel Air II' } },  { typeOrig: { $eq: 'BILLPAY' } }] }",
      "criteria": [
        {
          "field": "description",
          "operation": "contains",
          "value": "Bel Air II"
        },
        { "field": "typeOrig", "operation": "equals", "value": "BILLPAY" }
      ],
      "action": {
        "action": "categorize",
        "category1": "rent"  
      }
    },
    {
      "id": 17,
      "expectRows": 8,
      "compassQuery": "{ $and: [ { description: { $regex: 'Bel Air Apts - Phase II' } },  { typeOrig: { $eq: 'BILLPAY' } }] }",
      "criteria": [
        {
          "field": "description",
          "operation": "contains",
          "value": "Bel Air Apts - Phase II"
        },
        { "field": "typeOrig", "operation": "equals", "value": "BILLPAY" }
      ],
      "action": {
        "action": "categorize",
        "category1": "aum"   
      }
    },
    {
      "id": 18,
      "expectRows": 0,
      "compassQuery": "{ description: { $regex: '^CHECK #', $options: 'im' } }",
      "criteria": [
        {
          "field": "description",
          "operation": "contains",
          "value": " ARC ID: "
        }
      ],
      "action": {
        "action": "strip",
        "replaceValue": " ARC ID: ",
        "replaceWith": "",
        "numAdditionalChars": 10
      }
    }
  ]
}
